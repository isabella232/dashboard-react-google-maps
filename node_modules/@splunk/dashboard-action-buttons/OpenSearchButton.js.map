{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///./src/ActionButton.tsx","webpack:///./src/ActionItem.tsx","webpack:///external \"@splunk/ui-utils/i18n\"","webpack:///external \"@splunk/dashboard-telemetry\"","webpack:///external \"prop-types\"","webpack:///external \"styled-components\"","webpack:///./src/OpenSearchButton.tsx","webpack:///external \"@splunk/dashboard-icons/Search\"","webpack:///external \"@splunk/dashboard-utils/token\""],"names":[],"mappings":"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","file":"OpenSearchButton.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n","module.exports = require(\"react\");","import React from 'react';\nimport styled from 'styled-components';\nimport ActionItem from './ActionItem';\n\nconst Button = styled.div`\n    width: 30px;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n    cursor: pointer;\n    &[data-disabled='true'] {\n        cursor: not-allowed;\n    }\n`;\n\ninterface ActionButtonProps {\n    icon: React.ReactElement;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nconst noop = () => undefined;\n\nconst ActionButton = React.forwardRef<HTMLDivElement, ActionButtonProps>(\n    ({ icon, onClick = noop, disabled = false, ...rest }, ref) => (\n        <ActionItem>\n            <Button\n                onClick={disabled ? noop : onClick}\n                data-disabled={!!disabled}\n                data-clickable\n                ref={ref}\n                {...rest}\n            >\n                {React.cloneElement(icon, { size: '24px' })}\n            </Button>\n        </ActionItem>\n    )\n);\n\nexport default ActionButton;\n","import React, { MouseEvent } from 'react';\nimport T from 'prop-types';\n\nconst handleMouseDown = (e: MouseEvent): void => {\n    e.stopPropagation();\n};\n\nconst handleMouseMove = (e: MouseEvent) => {\n    e.stopPropagation();\n};\n\nconst handleMouseUp = (e: MouseEvent) => {\n    e.stopPropagation();\n};\n\ninterface ActionItemProps {\n    children?: React.ReactNode;\n}\n\nconst ActionItem = ({ children, ...rest }: ActionItemProps): JSX.Element => (\n    <div\n        data-test=\"action-item\"\n        role=\"presentation\"\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        {...rest}\n    >\n        {children}\n    </div>\n);\n\nActionItem.propTypes = {\n    children: T.any,\n};\n\nexport default ActionItem;\n","module.exports = require(\"@splunk/ui-utils/i18n\");","module.exports = require(\"@splunk/dashboard-telemetry\");","module.exports = require(\"prop-types\");","module.exports = require(\"styled-components\");","import React, { memo, useCallback, useMemo, useContext } from 'react';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport Search from '@splunk/dashboard-icons/Search';\nimport {\n    replaceTokensForObject,\n    hasTokensInObject,\n} from '@splunk/dashboard-utils/token';\nimport { TelemetryContext } from '@splunk/dashboard-telemetry';\nimport type {\n    DashboardApi,\n    DataSourceDefinition,\n} from '@splunk/dashboard-types';\nimport ActionButton from './ActionButton';\nimport { BaseButtonProps } from './BaseButton';\n\ninterface ResolvedSearchProps {\n    dataSourceId: string;\n    dataSourceDef: DataSourceDefinition;\n    submittedTokens: Record<string, unknown>;\n    dashboardApi: DashboardApi;\n}\n\nconst resolvedSearch = ({\n    dataSourceId,\n    dataSourceDef,\n    submittedTokens,\n    dashboardApi,\n}: ResolvedSearchProps) => {\n    let { options } = dataSourceDef;\n    if (dataSourceDef.type === 'ds.chain') {\n        options = {\n            ...options,\n            ...dashboardApi.getCompleteSearchQueryAndParameters(dataSourceId),\n        };\n    }\n    if (options) {\n        const resolvedOptions = replaceTokensForObject(\n            options,\n            submittedTokens\n        ) as typeof options;\n        if (!hasTokensInObject(resolvedOptions)) {\n            return {\n                ...dataSourceDef,\n                options: resolvedOptions,\n            };\n        }\n    }\n    return null;\n};\n\nconst noop = () => undefined;\n\ninterface ActionButtonWrapperProps {\n    search: unknown;\n    onOpenSearchClick: (...args: unknown[]) => void;\n    screenReaderText?: string;\n    disabled: boolean;\n}\n\nconst ActionButtonWrapper = memo(\n    ({\n        search,\n        onOpenSearchClick = noop,\n        screenReaderText,\n        disabled,\n    }: ActionButtonWrapperProps): JSX.Element => {\n        const telemetry = useContext(TelemetryContext);\n        const handleClick = useCallback(() => {\n            telemetry.collect({\n                source: 'actionMenu',\n                event: 'openInSearch',\n            });\n            onOpenSearchClick(search);\n        }, [search, onOpenSearchClick, telemetry]);\n\n        const icon = useMemo(\n            () => (\n                <Search\n                    screenReaderText={screenReaderText || _('Open in Search')}\n                />\n            ),\n            [screenReaderText]\n        );\n\n        return (\n            <ActionButton\n                data-test=\"open-search-button\"\n                onClick={handleClick}\n                icon={icon}\n                disabled={disabled}\n            />\n        );\n    }\n);\n\ninterface OpenSearchButtonProps extends BaseButtonProps {\n    onOpenSearchClick?: () => void;\n    disabled?: (...args: unknown[]) => boolean;\n}\n\nconst OpenSearchButton = ({\n    itemId,\n    dashboardApi,\n    visualization,\n    dataSources = {},\n    submittedTokens = {},\n    onOpenSearchClick = noop,\n    screenReaderText,\n    disabled,\n}: OpenSearchButtonProps): JSX.Element | null => {\n    const primary = visualization?.dataSources?.primary;\n    const primaryDataSource = primary ? dataSources?.[primary] : null;\n    if (\n        itemId == null ||\n        dashboardApi == null ||\n        primaryDataSource == null ||\n        !primary\n    ) {\n        return null;\n    }\n    // disable button if search is not resolved\n    const resolved = resolvedSearch({\n        dataSourceId: primary,\n        dataSourceDef: primaryDataSource,\n        submittedTokens,\n        dashboardApi,\n    });\n    // Default behavior is to disable if the type is not ds.search, ds.chain, or ds.savedSearch, but app developers can override with their behavior\n    const disableButton =\n        typeof disabled === 'function'\n            ? disabled(resolved)\n            : resolved === null ||\n              !(\n                  resolved.type === 'ds.search' ||\n                  resolved.type === 'ds.chain' ||\n                  resolved.type === 'ds.savedSearch'\n              );\n\n    return (\n        <ActionButtonWrapper\n            search={resolved}\n            onOpenSearchClick={onOpenSearchClick}\n            screenReaderText={screenReaderText}\n            disabled={disableButton}\n        />\n    );\n};\n\nexport default OpenSearchButton;\n","module.exports = require(\"@splunk/dashboard-icons/Search\");","module.exports = require(\"@splunk/dashboard-utils/token\");"],"sourceRoot":""}