{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///./src/ActionButton.tsx","webpack:///./src/ActionItem.tsx","webpack:///external \"@splunk/ui-utils/i18n\"","webpack:///external \"@splunk/dashboard-telemetry\"","webpack:///external \"prop-types\"","webpack:///external \"styled-components\"","webpack:///./src/LayerButton.tsx","webpack:///external \"@splunk/react-ui/Popover\"","webpack:///external \"@splunk/react-ui/Menu\"","webpack:///external \"@splunk/dashboard-icons/Layers\""],"names":[],"mappings":"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","file":"LayerButton.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","module.exports = require(\"react\");","import React from 'react';\nimport styled from 'styled-components';\nimport ActionItem from './ActionItem';\n\nconst Button = styled.div`\n    width: 30px;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n    cursor: pointer;\n    &[data-disabled='true'] {\n        cursor: not-allowed;\n    }\n`;\n\ninterface ActionButtonProps {\n    icon: React.ReactElement;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nconst noop = () => undefined;\n\nconst ActionButton = React.forwardRef<HTMLDivElement, ActionButtonProps>(\n    ({ icon, onClick = noop, disabled = false, ...rest }, ref) => (\n        <ActionItem>\n            <Button\n                onClick={disabled ? noop : onClick}\n                data-disabled={!!disabled}\n                data-clickable\n                ref={ref}\n                {...rest}\n            >\n                {React.cloneElement(icon, { size: '24px' })}\n            </Button>\n        </ActionItem>\n    )\n);\n\nexport default ActionButton;\n","import React, { MouseEvent } from 'react';\nimport T from 'prop-types';\n\nconst handleMouseDown = (e: MouseEvent): void => {\n    e.stopPropagation();\n};\n\nconst handleMouseMove = (e: MouseEvent) => {\n    e.stopPropagation();\n};\n\nconst handleMouseUp = (e: MouseEvent) => {\n    e.stopPropagation();\n};\n\ninterface ActionItemProps {\n    children?: React.ReactNode;\n}\n\nconst ActionItem = ({ children, ...rest }: ActionItemProps): JSX.Element => (\n    <div\n        data-test=\"action-item\"\n        role=\"presentation\"\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        {...rest}\n    >\n        {children}\n    </div>\n);\n\nActionItem.propTypes = {\n    children: T.any,\n};\n\nexport default ActionItem;\n","module.exports = require(\"@splunk/ui-utils/i18n\");","module.exports = require(\"@splunk/dashboard-telemetry\");","module.exports = require(\"prop-types\");","module.exports = require(\"styled-components\");","import React, { memo, useCallback, useState, useRef, useContext } from 'react';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport Popover from '@splunk/react-ui/Popover';\nimport Menu from '@splunk/react-ui/Menu';\nimport Layers from '@splunk/dashboard-icons/Layers';\nimport { TelemetryContext } from '@splunk/dashboard-telemetry';\nimport type { DashboardApi } from '@splunk/dashboard-types';\nimport ActionItem from './ActionItem';\nimport ActionButton from './ActionButton';\nimport { BaseButtonProps } from './BaseButton';\n\nconst menuStyle = { width: 130 };\n\ninterface MenuItemContainerProps {\n    label: string;\n    adjustOrder: (config: { from: number; to: number; event: string }) => void;\n    from: number;\n    to: number;\n    dataTest: string;\n}\n\nconst MenuItemContainer = memo(function MenuItemContainer({\n    label,\n    adjustOrder,\n    from,\n    to,\n    dataTest,\n}: MenuItemContainerProps): JSX.Element {\n    const handleClick = useCallback(\n        () => adjustOrder({ from, to, event: dataTest }),\n        [adjustOrder, from, to, dataTest]\n    );\n\n    return (\n        <Menu.Item data-test={dataTest} onClick={handleClick}>\n            {label}\n        </Menu.Item>\n    );\n});\n\n/**\n *\n */\nconst LayerButton = ({\n    dashboardApi,\n    itemId,\n    screenReaderText,\n}: BaseButtonProps): JSX.Element | null => {\n    const [open, setOpen] = useState(false);\n    const anchor = useRef(null);\n    const telemetry = useContext(TelemetryContext);\n\n    const handleRequestClose = useCallback(() => {\n        setOpen(false);\n    }, []);\n\n    const handleOpen = useCallback(() => {\n        setOpen(true);\n    }, []);\n\n    const setRef = useCallback((refEl) => {\n        anchor.current = refEl;\n    }, []);\n\n    const adjustOrder = useCallback(\n        ({ from, to, event }) => {\n            telemetry.collect({\n                source: 'actionMenu',\n                event,\n            });\n            // It's not possible to trigger this if dashboardApi is not defined, but typescript doesn't know that.\n            (dashboardApi as DashboardApi).adjustVisualizationOrder(from, to);\n            handleRequestClose();\n        },\n        [dashboardApi, handleRequestClose, telemetry]\n    );\n\n    if (!itemId || !dashboardApi) {\n        return null;\n    }\n\n    if (dashboardApi.getDefinition().layout?.type !== 'absolute') {\n        return null;\n    }\n\n    // dashboardApi is defined by the time we get here\n    const order = dashboardApi.getVisualizationOrder();\n\n    // do not display this button if no order or there's only one item\n    if (order == null || order.length === 1) {\n        return null;\n    }\n\n    const itemIdx = order.indexOf(itemId);\n    const isFront = itemIdx === order.length - 1;\n    const isBack = itemIdx === 0;\n    return (\n        <ActionItem>\n            <ActionButton\n                data-test=\"layer-button\"\n                icon={\n                    <Layers\n                        screenReaderText={screenReaderText || _('Layers')}\n                    />\n                }\n                ref={setRef}\n                onClick={handleOpen}\n            />\n            <Popover\n                open={open}\n                anchor={anchor.current}\n                onRequestClose={handleRequestClose}\n                defaultPlacement=\"right\"\n                appearance=\"normal\"\n            >\n                <Menu style={menuStyle} data-test=\"layer-menu\">\n                    {!isFront && (\n                        <MenuItemContainer\n                            dataTest=\"layer-forward\"\n                            label={_('Move forward')}\n                            adjustOrder={adjustOrder}\n                            from={itemIdx}\n                            to={itemIdx + 1}\n                        />\n                    )}\n                    {!isFront && (\n                        <MenuItemContainer\n                            dataTest=\"layer-front\"\n                            label={_('Bring to front')}\n                            adjustOrder={adjustOrder}\n                            from={itemIdx}\n                            to={order.length - 1}\n                        />\n                    )}\n                    {!isBack && (\n                        <MenuItemContainer\n                            dataTest=\"layer-backward\"\n                            label={_('Move backward')}\n                            adjustOrder={adjustOrder}\n                            from={itemIdx}\n                            to={itemIdx - 1}\n                        />\n                    )}\n                    {!isBack && (\n                        <MenuItemContainer\n                            dataTest=\"layer-back\"\n                            label={_('Send to back')}\n                            adjustOrder={adjustOrder}\n                            from={itemIdx}\n                            to={0}\n                        />\n                    )}\n                </Menu>\n            </Popover>\n        </ActionItem>\n    );\n};\n\nexport default LayerButton;\n","module.exports = require(\"@splunk/react-ui/Popover\");","module.exports = require(\"@splunk/react-ui/Menu\");","module.exports = require(\"@splunk/dashboard-icons/Layers\");"],"sourceRoot":""}